<h1>Todos</h1>

<p><i>Note: because this is only a mock server the resources won't actually be modified, just faked as if they were.</i></p>

<ul>
  <li>Any changes made will be reset when the data is refreshed</li>
  <li>Creating a new todo will always return an object with id = 201</li>
</ul>

<ul ngbNav #nav="ngbNav" [(activeId)]="activeNavItem" class="nav-tabs">
  <li [ngbNavItem]="listTodosNavItemId">
    <a ngbNavLink>List todos</a>
    <ng-template ngbNavContent>
      <app-list-todos
        [todos]=todos
        [isLoading]=isPerformingRequest
        (deletedTodoWithId)=onDeleteTodoEvent($event)
        (updateSelectedTodoWithId)=onUpdateSelectedTodoEvent($event)
        (getAll)=onGetAllEvent()
        (getFilteredWithUserId)=onGetFilteredEvent($event)
        (viewSelectedTodoWithId)=onViewSelectedTodoEvent($event)
        ></app-list-todos>
    </ng-template>
  </li>
  <li [ngbNavItem]="viewTodoNavItemId">
    <a ngbNavLink>View todo</a>
    <ng-template ngbNavContent>
      <app-view-todo
        [todo]=selectedTodo
        [isLoading]=isPerformingRequest
        (viewTodoWithId)=onViewTodoEvent($event)
        ></app-view-todo>
    </ng-template>
  </li>
  <li [ngbNavItem]="createNavItemId">
    <a ngbNavLink>Create new</a>
    <ng-template ngbNavContent>
      <app-create-todo
        [isLoading]=isPerformingRequest
        (createTodoEmitter)=onCreateTodoEvent($event)
        [createTodoSuccessEvent]="createTodoSuccessSubject.asObservable()"
        ></app-create-todo>
    </ng-template>
  </li>
  <li [ngbNavItem]="updateNavItemId" [disabled]="activeNavItem !== updateNavItemId">
    <a ngbNavLink>Update existing</a>
    <ng-template ngbNavContent>
      <app-update-todo
        [todo]=selectedTodo!
        [isLoading]=isPerformingRequest
        (updateFullTodoEmitter)=onUpdateFullTodoEvent($event)
        ></app-update-todo>
    </ng-template>
  </li>
</ul>

<div [ngbNavOutlet]="nav" class="mt-2"></div>
